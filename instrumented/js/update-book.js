function cov_2fpm5ujm8s(){var path="C:\\My_stuff\\TP\\Year_2_Semester_2\\DevOps\\DevOps_Project_Part_2\\BookTrack_DevOps_Project\\public\\js\\update-book.js";var hash="4e890e28fceecc0cee40f6809885276a2323c445";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\My_stuff\\TP\\Year_2_Semester_2\\DevOps\\DevOps_Project_Part_2\\BookTrack_DevOps_Project\\public\\js\\update-book.js",statementMap:{"0":{start:{line:3,column:4},end:{line:3,column:67}},"1":{start:{line:4,column:4},end:{line:4,column:72}},"2":{start:{line:9,column:21},end:{line:9,column:63}},"3":{start:{line:10,column:18},end:{line:10,column:39}},"4":{start:{line:12,column:4},end:{line:12,column:79}},"5":{start:{line:12,column:31},end:{line:12,column:77}},"6":{start:{line:18,column:4},end:{line:18,column:34}},"7":{start:{line:21,column:4},end:{line:45,column:5}},"8":{start:{line:22,column:18},end:{line:22,column:19}},"9":{start:{line:23,column:8},end:{line:26,column:9}},"10":{start:{line:23,column:21},end:{line:23,column:22}},"11":{start:{line:24,column:12},end:{line:24,column:61}},"12":{start:{line:24,column:48},end:{line:24,column:61}},"13":{start:{line:25,column:12},end:{line:25,column:51}},"14":{start:{line:28,column:23},end:{line:28,column:30}},"15":{start:{line:29,column:8},end:{line:35,column:9}},"16":{start:{line:30,column:12},end:{line:30,column:27}},"17":{start:{line:31,column:15},end:{line:35,column:9}},"18":{start:{line:32,column:12},end:{line:32,column:47}},"19":{start:{line:34,column:12},end:{line:34,column:25}},"20":{start:{line:36,column:8},end:{line:36,column:30}},"21":{start:{line:37,column:11},end:{line:45,column:5}},"22":{start:{line:38,column:18},end:{line:38,column:19}},"23":{start:{line:39,column:8},end:{line:43,column:9}},"24":{start:{line:39,column:21},end:{line:39,column:22}},"25":{start:{line:40,column:26},end:{line:40,column:47}},"26":{start:{line:41,column:12},end:{line:41,column:43}},"27":{start:{line:41,column:30},end:{line:41,column:43}},"28":{start:{line:42,column:12},end:{line:42,column:51}},"29":{start:{line:44,column:8},end:{line:44,column:30}},"30":{start:{line:46,column:4},end:{line:46,column:17}},"31":{start:{line:52,column:4},end:{line:86,column:5}},"32":{start:{line:54,column:25},end:{line:54,column:77}},"33":{start:{line:56,column:8},end:{line:82,column:9}},"34":{start:{line:57,column:25},end:{line:57,column:46}},"35":{start:{line:60,column:12},end:{line:60,column:68}},"36":{start:{line:61,column:12},end:{line:61,column:70}},"37":{start:{line:62,column:12},end:{line:62,column:66}},"38":{start:{line:63,column:12},end:{line:63,column:68}},"39":{start:{line:64,column:12},end:{line:64,column:79}},"40":{start:{line:65,column:12},end:{line:65,column:67}},"41":{start:{line:66,column:12},end:{line:66,column:60}},"42":{start:{line:69,column:33},end:{line:69,column:80}},"43":{start:{line:70,column:12},end:{line:75,column:13}},"44":{start:{line:71,column:16},end:{line:71,column:74}},"45":{start:{line:72,column:16},end:{line:72,column:53}},"46":{start:{line:74,column:16},end:{line:74,column:52}},"47":{start:{line:78,column:12},end:{line:78,column:81}},"48":{start:{line:79,column:12},end:{line:79,column:76}},"49":{start:{line:81,column:12},end:{line:81,column:63}},"50":{start:{line:84,column:8},end:{line:84,column:65}},"51":{start:{line:85,column:8},end:{line:85,column:68}},"52":{start:{line:90,column:0},end:{line:111,column:3}},"53":{start:{line:91,column:17},end:{line:91,column:38}},"54":{start:{line:94,column:4},end:{line:110,column:5}},"55":{start:{line:96,column:8},end:{line:100,column:9}},"56":{start:{line:97,column:12},end:{line:97,column:86}},"57":{start:{line:98,column:12},end:{line:98,column:36}},"58":{start:{line:99,column:12},end:{line:99,column:19}},"59":{start:{line:103,column:23},end:{line:103,column:39}},"60":{start:{line:104,column:8},end:{line:108,column:10}},"61":{start:{line:105,column:33},end:{line:105,column:80}},"62":{start:{line:106,column:12},end:{line:106,column:47}},"63":{start:{line:107,column:12},end:{line:107,column:49}},"64":{start:{line:109,column:8},end:{line:109,column:35}},"65":{start:{line:114,column:0},end:{line:168,column:3}},"66":{start:{line:115,column:4},end:{line:115,column:27}},"67":{start:{line:117,column:17},end:{line:117,column:35}},"68":{start:{line:118,column:19},end:{line:118,column:62}},"69":{start:{line:119,column:18},end:{line:119,column:67}},"70":{start:{line:120,column:19},end:{line:120,column:69}},"71":{start:{line:121,column:17},end:{line:121,column:58}},"72":{start:{line:124,column:4},end:{line:127,column:5}},"73":{start:{line:125,column:8},end:{line:125,column:56}},"74":{start:{line:126,column:8},end:{line:126,column:15}},"75":{start:{line:129,column:4},end:{line:132,column:5}},"76":{start:{line:130,column:8},end:{line:130,column:62}},"77":{start:{line:131,column:8},end:{line:131,column:15}},"78":{start:{line:134,column:4},end:{line:137,column:5}},"79":{start:{line:135,column:8},end:{line:135,column:72}},"80":{start:{line:136,column:8},end:{line:136,column:15}},"81":{start:{line:140,column:26},end:{line:140,column:60}},"82":{start:{line:141,column:4},end:{line:144,column:5}},"83":{start:{line:142,column:8},end:{line:142,column:72}},"84":{start:{line:143,column:8},end:{line:143,column:15}},"85":{start:{line:146,column:24},end:{line:146,column:84}},"86":{start:{line:147,column:4},end:{line:149,column:5}},"87":{start:{line:148,column:8},end:{line:148,column:15}},"88":{start:{line:151,column:4},end:{line:167,column:5}},"89":{start:{line:152,column:25},end:{line:155,column:10}},"90":{start:{line:157,column:8},end:{line:163,column:9}},"91":{start:{line:158,column:12},end:{line:158,column:48}},"92":{start:{line:159,column:12},end:{line:159,column:24}},"93":{start:{line:160,column:12},end:{line:160,column:23}},"94":{start:{line:162,column:12},end:{line:162,column:68}},"95":{start:{line:165,column:8},end:{line:165,column:53}},"96":{start:{line:166,column:8},end:{line:166,column:98}},"97":{start:{line:173,column:4},end:{line:176,column:5}},"98":{start:{line:174,column:8},end:{line:174,column:61}},"99":{start:{line:175,column:8},end:{line:175,column:15}},"100":{start:{line:178,column:20},end:{line:178,column:40}},"101":{start:{line:180,column:4},end:{line:180,column:71}},"102":{start:{line:183,column:4},end:{line:205,column:6}},"103":{start:{line:185,column:8},end:{line:204,column:9}},"104":{start:{line:187,column:25},end:{line:187,column:57}},"105":{start:{line:188,column:12},end:{line:188,column:37}},"106":{start:{line:191,column:13},end:{line:204,column:9}},"107":{start:{line:192,column:12},end:{line:192,column:80}},"108":{start:{line:193,column:12},end:{line:193,column:73}},"109":{start:{line:196,column:13},end:{line:204,column:9}},"110":{start:{line:197,column:12},end:{line:197,column:63}},"111":{start:{line:198,column:12},end:{line:198,column:65}},"112":{start:{line:202,column:12},end:{line:202,column:78}},"113":{start:{line:203,column:12},end:{line:203,column:71}},"114":{start:{line:208,column:4},end:{line:212,column:6}},"115":{start:{line:210,column:8},end:{line:210,column:59}},"116":{start:{line:211,column:8},end:{line:211,column:98}},"117":{start:{line:215,column:4},end:{line:215,column:19}}},fnMap:{"0":{name:"closeForm",decl:{start:{line:2,column:9},end:{line:2,column:18}},loc:{start:{line:2,column:21},end:{line:5,column:1}},line:2},"1":{name:"isTitleUnique",decl:{start:{line:8,column:15},end:{line:8,column:28}},loc:{start:{line:8,column:47},end:{line:13,column:1}},line:8},"2":{name:"(anonymous_2)",decl:{start:{line:12,column:23},end:{line:12,column:24}},loc:{start:{line:12,column:31},end:{line:12,column:77}},line:12},"3":{name:"isValidISBN",decl:{start:{line:16,column:9},end:{line:16,column:20}},loc:{start:{line:16,column:27},end:{line:47,column:1}},line:16},"4":{name:"editBook",decl:{start:{line:50,column:15},end:{line:50,column:23}},loc:{start:{line:50,column:32},end:{line:87,column:1}},line:50},"5":{name:"(anonymous_5)",decl:{start:{line:90,column:64},end:{line:90,column:65}},loc:{start:{line:90,column:81},end:{line:111,column:1}},line:90},"6":{name:"(anonymous_6)",decl:{start:{line:104,column:24},end:{line:104,column:25}},loc:{start:{line:104,column:37},end:{line:108,column:9}},line:104},"7":{name:"(anonymous_7)",decl:{start:{line:114,column:67},end:{line:114,column:68}},loc:{start:{line:114,column:90},end:{line:168,column:1}},line:114},"8":{name:"getBookById",decl:{start:{line:171,column:9},end:{line:171,column:20}},loc:{start:{line:171,column:29},end:{line:216,column:1}},line:171},"9":{name:"(anonymous_9)",decl:{start:{line:183,column:21},end:{line:183,column:22}},loc:{start:{line:183,column:33},end:{line:205,column:5}},line:183},"10":{name:"(anonymous_10)",decl:{start:{line:208,column:22},end:{line:208,column:23}},loc:{start:{line:208,column:34},end:{line:212,column:5}},line:208}},branchMap:{"0":{loc:{start:{line:12,column:31},end:{line:12,column:77}},type:"binary-expr",locations:[{start:{line:12,column:31},end:{line:12,column:54}},{start:{line:12,column:58},end:{line:12,column:77}}],line:12},"1":{loc:{start:{line:21,column:4},end:{line:45,column:5}},type:"if",locations:[{start:{line:21,column:4},end:{line:45,column:5}},{start:{line:37,column:11},end:{line:45,column:5}}],line:21},"2":{loc:{start:{line:24,column:12},end:{line:24,column:61}},type:"if",locations:[{start:{line:24,column:12},end:{line:24,column:61}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:24},"3":{loc:{start:{line:24,column:16},end:{line:24,column:46}},type:"binary-expr",locations:[{start:{line:24,column:16},end:{line:24,column:29}},{start:{line:24,column:33},end:{line:24,column:46}}],line:24},"4":{loc:{start:{line:29,column:8},end:{line:35,column:9}},type:"if",locations:[{start:{line:29,column:8},end:{line:35,column:9}},{start:{line:31,column:15},end:{line:35,column:9}}],line:29},"5":{loc:{start:{line:31,column:15},end:{line:35,column:9}},type:"if",locations:[{start:{line:31,column:15},end:{line:35,column:9}},{start:{line:33,column:15},end:{line:35,column:9}}],line:31},"6":{loc:{start:{line:31,column:19},end:{line:31,column:53}},type:"binary-expr",locations:[{start:{line:31,column:19},end:{line:31,column:34}},{start:{line:31,column:38},end:{line:31,column:53}}],line:31},"7":{loc:{start:{line:37,column:11},end:{line:45,column:5}},type:"if",locations:[{start:{line:37,column:11},end:{line:45,column:5}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:37},"8":{loc:{start:{line:41,column:12},end:{line:41,column:43}},type:"if",locations:[{start:{line:41,column:12},end:{line:41,column:43}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:41},"9":{loc:{start:{line:42,column:19},end:{line:42,column:50}},type:"cond-expr",locations:[{start:{line:42,column:33},end:{line:42,column:38}},{start:{line:42,column:41},end:{line:42,column:50}}],line:42},"10":{loc:{start:{line:56,column:8},end:{line:82,column:9}},type:"if",locations:[{start:{line:56,column:8},end:{line:82,column:9}},{start:{line:80,column:15},end:{line:82,column:9}}],line:56},"11":{loc:{start:{line:70,column:12},end:{line:75,column:13}},type:"if",locations:[{start:{line:70,column:12},end:{line:75,column:13}},{start:{line:73,column:19},end:{line:75,column:13}}],line:70},"12":{loc:{start:{line:94,column:4},end:{line:110,column:5}},type:"if",locations:[{start:{line:94,column:4},end:{line:110,column:5}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:94},"13":{loc:{start:{line:96,column:8},end:{line:100,column:9}},type:"if",locations:[{start:{line:96,column:8},end:{line:100,column:9}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:96},"14":{loc:{start:{line:124,column:4},end:{line:127,column:5}},type:"if",locations:[{start:{line:124,column:4},end:{line:127,column:5}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:124},"15":{loc:{start:{line:129,column:4},end:{line:132,column:5}},type:"if",locations:[{start:{line:129,column:4},end:{line:132,column:5}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:129},"16":{loc:{start:{line:134,column:4},end:{line:137,column:5}},type:"if",locations:[{start:{line:134,column:4},end:{line:137,column:5}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:134},"17":{loc:{start:{line:141,column:4},end:{line:144,column:5}},type:"if",locations:[{start:{line:141,column:4},end:{line:144,column:5}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:141},"18":{loc:{start:{line:147,column:4},end:{line:149,column:5}},type:"if",locations:[{start:{line:147,column:4},end:{line:149,column:5}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:147},"19":{loc:{start:{line:157,column:8},end:{line:163,column:9}},type:"if",locations:[{start:{line:157,column:8},end:{line:163,column:9}},{start:{line:161,column:15},end:{line:163,column:9}}],line:157},"20":{loc:{start:{line:173,column:4},end:{line:176,column:5}},type:"if",locations:[{start:{line:173,column:4},end:{line:176,column:5}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:173},"21":{loc:{start:{line:173,column:8},end:{line:173,column:69}},type:"binary-expr",locations:[{start:{line:173,column:8},end:{line:173,column:15}},{start:{line:173,column:19},end:{line:173,column:45}},{start:{line:173,column:49},end:{line:173,column:69}}],line:173},"22":{loc:{start:{line:185,column:8},end:{line:204,column:9}},type:"if",locations:[{start:{line:185,column:8},end:{line:204,column:9}},{start:{line:191,column:13},end:{line:204,column:9}}],line:185},"23":{loc:{start:{line:185,column:12},end:{line:185,column:57}},type:"binary-expr",locations:[{start:{line:185,column:12},end:{line:185,column:33}},{start:{line:185,column:37},end:{line:185,column:57}}],line:185},"24":{loc:{start:{line:191,column:13},end:{line:204,column:9}},type:"if",locations:[{start:{line:191,column:13},end:{line:204,column:9}},{start:{line:196,column:13},end:{line:204,column:9}}],line:191},"25":{loc:{start:{line:196,column:13},end:{line:204,column:9}},type:"if",locations:[{start:{line:196,column:13},end:{line:204,column:9}},{start:{line:201,column:13},end:{line:204,column:9}}],line:196}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"4e890e28fceecc0cee40f6809885276a2323c445"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2fpm5ujm8s=function(){return actualCoverage;};}return actualCoverage;}cov_2fpm5ujm8s();// General function to close whichever form is open
function closeForm(){cov_2fpm5ujm8s().f[0]++;cov_2fpm5ujm8s().s[0]++;document.getElementById('edit-overlay').style.display='none';cov_2fpm5ujm8s().s[1]++;document.getElementById('editFormContainer').style.display='none';}// Function to check if a title already exists, ignoring the current book
async function isTitleUnique(newTitle,bookId){cov_2fpm5ujm8s().f[1]++;const response=(cov_2fpm5ujm8s().s[2]++,await fetch(`http://localhost:5500/books`));const books=(cov_2fpm5ujm8s().s[3]++,await response.json());cov_2fpm5ujm8s().s[4]++;return books.every(book=>{cov_2fpm5ujm8s().f[2]++;cov_2fpm5ujm8s().s[5]++;return(cov_2fpm5ujm8s().b[0][0]++,book.title!==newTitle)||(cov_2fpm5ujm8s().b[0][1]++,book._id===bookId);});}// Function to validate ISBN
function isValidISBN(isbn){cov_2fpm5ujm8s().f[3]++;cov_2fpm5ujm8s().s[6]++;// Remove any hyphens
isbn=isbn.replace(/-/g,'');// Check if the ISBN is 10 or 13 characters long
cov_2fpm5ujm8s().s[7]++;if(isbn.length===10){cov_2fpm5ujm8s().b[1][0]++;let sum=(cov_2fpm5ujm8s().s[8]++,0);cov_2fpm5ujm8s().s[9]++;for(let i=(cov_2fpm5ujm8s().s[10]++,0);i<9;i++){cov_2fpm5ujm8s().s[11]++;if((cov_2fpm5ujm8s().b[3][0]++,isbn[i]<'0')||(cov_2fpm5ujm8s().b[3][1]++,isbn[i]>'9')){cov_2fpm5ujm8s().b[2][0]++;cov_2fpm5ujm8s().s[12]++;return false;}else{cov_2fpm5ujm8s().b[2][1]++;}// Ensure all characters are digits
cov_2fpm5ujm8s().s[13]++;sum+=(i+1)*parseInt(isbn[i],10);}let checksum=(cov_2fpm5ujm8s().s[14]++,isbn[9]);cov_2fpm5ujm8s().s[15]++;if(checksum==='X'){cov_2fpm5ujm8s().b[4][0]++;cov_2fpm5ujm8s().s[16]++;sum+=10*10;}else{cov_2fpm5ujm8s().b[4][1]++;cov_2fpm5ujm8s().s[17]++;if((cov_2fpm5ujm8s().b[6][0]++,checksum>='0')&&(cov_2fpm5ujm8s().b[6][1]++,checksum<='9')){cov_2fpm5ujm8s().b[5][0]++;cov_2fpm5ujm8s().s[18]++;sum+=10*parseInt(checksum,10);//calculates the weighted sum for each digit by multiplying the digit's position
}else{cov_2fpm5ujm8s().b[5][1]++;cov_2fpm5ujm8s().s[19]++;return false;}}cov_2fpm5ujm8s().s[20]++;return sum%11===0;}else{cov_2fpm5ujm8s().b[1][1]++;cov_2fpm5ujm8s().s[21]++;if(isbn.length===13){cov_2fpm5ujm8s().b[7][0]++;let sum=(cov_2fpm5ujm8s().s[22]++,0);cov_2fpm5ujm8s().s[23]++;for(let i=(cov_2fpm5ujm8s().s[24]++,0);i<13;i++){const digit=(cov_2fpm5ujm8s().s[25]++,parseInt(isbn[i],10));cov_2fpm5ujm8s().s[26]++;if(isNaN(digit)){cov_2fpm5ujm8s().b[8][0]++;cov_2fpm5ujm8s().s[27]++;return false;}else{cov_2fpm5ujm8s().b[8][1]++;}// Ensure all characters are digits
cov_2fpm5ujm8s().s[28]++;sum+=i%2===0?(cov_2fpm5ujm8s().b[9][0]++,digit):(cov_2fpm5ujm8s().b[9][1]++,digit*3);}cov_2fpm5ujm8s().s[29]++;return sum%10===0;}else{cov_2fpm5ujm8s().b[7][1]++;}}cov_2fpm5ujm8s().s[30]++;return false;}// Function to open the update form with current book details
async function editBook(bookId){cov_2fpm5ujm8s().f[4]++;cov_2fpm5ujm8s().s[31]++;try{// Fetch the book details from the server using the book ID
const response=(cov_2fpm5ujm8s().s[32]++,await fetch(`http://localhost:5500/books/${bookId}`));cov_2fpm5ujm8s().s[33]++;if(response.ok){cov_2fpm5ujm8s().b[10][0]++;const book=(cov_2fpm5ujm8s().s[34]++,await response.json());// Set the form fields with current book details
cov_2fpm5ujm8s().s[35]++;document.getElementById('editTitle').value=book.title;cov_2fpm5ujm8s().s[36]++;document.getElementById('editAuthor').value=book.author;cov_2fpm5ujm8s().s[37]++;document.getElementById('editIsbn').value=book.isbn;cov_2fpm5ujm8s().s[38]++;document.getElementById('editGenre').value=book.genre;cov_2fpm5ujm8s().s[39]++;document.getElementById('editCopies').value=book.availableCopies;cov_2fpm5ujm8s().s[40]++;document.getElementById('editBookId').value=book._id;cov_2fpm5ujm8s().s[41]++;document.getElementById('editImage').value='';// Reset image input
// Set the image preview element if there's an existing image
const imageElement=(cov_2fpm5ujm8s().s[42]++,document.getElementById('editBookPreviewImage'));cov_2fpm5ujm8s().s[43]++;if(book.image){cov_2fpm5ujm8s().b[11][0]++;cov_2fpm5ujm8s().s[44]++;imageElement.src=`data:image/jpeg;base64,${book.image}`;cov_2fpm5ujm8s().s[45]++;imageElement.style.display='block';// Show the image if it exists
}else{cov_2fpm5ujm8s().b[11][1]++;cov_2fpm5ujm8s().s[46]++;imageElement.style.display='none';// Hide the image if not available
}// Display the form
cov_2fpm5ujm8s().s[47]++;document.getElementById('editFormContainer').style.display='block';cov_2fpm5ujm8s().s[48]++;document.getElementById('edit-overlay').style.display='block';}else{cov_2fpm5ujm8s().b[10][1]++;cov_2fpm5ujm8s().s[49]++;alert('Failed to fetch book details for editing.');}}catch(error){cov_2fpm5ujm8s().s[50]++;console.error('Error fetching book for editing:',error);cov_2fpm5ujm8s().s[51]++;alert('An error occurred while fetching the book details.');}}// Event listener to handle image preview when a new image is selected
cov_2fpm5ujm8s().s[52]++;document.getElementById('editImage').addEventListener('change',function(event){cov_2fpm5ujm8s().f[5]++;const file=(cov_2fpm5ujm8s().s[53]++,event.target.files[0]);// Check if an image file is selected
cov_2fpm5ujm8s().s[54]++;if(file){cov_2fpm5ujm8s().b[12][0]++;cov_2fpm5ujm8s().s[55]++;// Check if file size exceeds 16MB (16 * 1024 * 1024 bytes)
if(file.size>16*1024*1024){cov_2fpm5ujm8s().b[13][0]++;cov_2fpm5ujm8s().s[56]++;alert('Image size should not exceed 16MB. Please select a smaller file.');cov_2fpm5ujm8s().s[57]++;event.target.value='';// Clear the file input
cov_2fpm5ujm8s().s[58]++;return;}else{cov_2fpm5ujm8s().b[13][1]++;}// Proceed with displaying the image preview if the size is valid
const reader=(cov_2fpm5ujm8s().s[59]++,new FileReader());cov_2fpm5ujm8s().s[60]++;reader.onload=function(e){cov_2fpm5ujm8s().f[6]++;const imageElement=(cov_2fpm5ujm8s().s[61]++,document.getElementById('editBookPreviewImage'));cov_2fpm5ujm8s().s[62]++;imageElement.src=e.target.result;cov_2fpm5ujm8s().s[63]++;imageElement.style.display='block';// Show the preview
};cov_2fpm5ujm8s().s[64]++;reader.readAsDataURL(file);}else{cov_2fpm5ujm8s().b[12][1]++;}});// Function to handle update form submission
cov_2fpm5ujm8s().s[65]++;document.getElementById('editBookForm').addEventListener('submit',async function(event){cov_2fpm5ujm8s().f[7]++;cov_2fpm5ujm8s().s[66]++;event.preventDefault();// Prevent default form submission
const form=(cov_2fpm5ujm8s().s[67]++,new FormData(this));const bookId=(cov_2fpm5ujm8s().s[68]++,document.getElementById('editBookId').value);const title=(cov_2fpm5ujm8s().s[69]++,document.getElementById('editTitle').value.trim());const author=(cov_2fpm5ujm8s().s[70]++,document.getElementById('editAuthor').value.trim());const isbn=(cov_2fpm5ujm8s().s[71]++,document.getElementById('editIsbn').value);// Title and Author length validation
cov_2fpm5ujm8s().s[72]++;if(title.length>100){cov_2fpm5ujm8s().b[14][0]++;cov_2fpm5ujm8s().s[73]++;alert('Title must be 100 characters or fewer.');cov_2fpm5ujm8s().s[74]++;return;}else{cov_2fpm5ujm8s().b[14][1]++;}cov_2fpm5ujm8s().s[75]++;if(author.length>150){cov_2fpm5ujm8s().b[15][0]++;cov_2fpm5ujm8s().s[76]++;alert('Author name must be 150 characters or fewer.');cov_2fpm5ujm8s().s[77]++;return;}else{cov_2fpm5ujm8s().b[15][1]++;}cov_2fpm5ujm8s().s[78]++;if(!isValidISBN(isbn)){cov_2fpm5ujm8s().b[16][0]++;cov_2fpm5ujm8s().s[79]++;alert('Invalid ISBN. Please enter a valid ISBN-10 or ISBN-13.');cov_2fpm5ujm8s().s[80]++;return;}else{cov_2fpm5ujm8s().b[16][1]++;}// Check if title is unique (ignoring the current book's own title)
const isUniqueTitle=(cov_2fpm5ujm8s().s[81]++,await isTitleUnique(title,bookId));cov_2fpm5ujm8s().s[82]++;if(!isUniqueTitle){cov_2fpm5ujm8s().b[17][0]++;cov_2fpm5ujm8s().s[83]++;alert('Title already exists. Please choose a different title.');cov_2fpm5ujm8s().s[84]++;return;}else{cov_2fpm5ujm8s().b[17][1]++;}const isConfirmed=(cov_2fpm5ujm8s().s[85]++,confirm("Are you sure you want to update the book details?"));cov_2fpm5ujm8s().s[86]++;if(!isConfirmed){cov_2fpm5ujm8s().b[18][0]++;cov_2fpm5ujm8s().s[87]++;return;// Exit function if user does not confirm
}else{cov_2fpm5ujm8s().b[18][1]++;}cov_2fpm5ujm8s().s[88]++;try{const response=(cov_2fpm5ujm8s().s[89]++,await fetch(`http://localhost:5500/updateBook/${bookId}`,{method:'PUT',body:form}));cov_2fpm5ujm8s().s[90]++;if(response.ok){cov_2fpm5ujm8s().b[19][0]++;cov_2fpm5ujm8s().s[91]++;alert('Book updated successfully!');cov_2fpm5ujm8s().s[92]++;closeForm();// Close the edit form
cov_2fpm5ujm8s().s[93]++;getBooks();// Refresh the book list
}else{cov_2fpm5ujm8s().b[19][1]++;cov_2fpm5ujm8s().s[94]++;alert('Failed to update book. Please try again later.');}}catch(error){cov_2fpm5ujm8s().s[95]++;console.error('Error updating book:',error);cov_2fpm5ujm8s().s[96]++;alert('An error occurred while updating the book. Please check the console for details.');}});// Function to fetch a book by ID
function getBookById(bookId){cov_2fpm5ujm8s().f[8]++;cov_2fpm5ujm8s().s[97]++;// Validate the provided book ID
if((cov_2fpm5ujm8s().b[21][0]++,!bookId)||(cov_2fpm5ujm8s().b[21][1]++,typeof bookId!=='string')||(cov_2fpm5ujm8s().b[21][2]++,bookId.trim()==='')){cov_2fpm5ujm8s().b[20][0]++;cov_2fpm5ujm8s().s[98]++;alert('Invalid book ID. Please provide a valid ID.');cov_2fpm5ujm8s().s[99]++;return;// Exit function if the book ID is invalid
}else{cov_2fpm5ujm8s().b[20][1]++;}const request=(cov_2fpm5ujm8s().s[100]++,new XMLHttpRequest());// Open a GET request to fetch a specific book by its ID, using template literals in the URL
cov_2fpm5ujm8s().s[101]++;request.open('GET',`http://localhost:5500/books/${bookId}`,true);// Define the onload event handler for the request
cov_2fpm5ujm8s().s[102]++;request.onload=function(){cov_2fpm5ujm8s().f[9]++;cov_2fpm5ujm8s().s[103]++;// Check if the request was successful (status code between 200 and 299)
if((cov_2fpm5ujm8s().b[23][0]++,request.status>=200)&&(cov_2fpm5ujm8s().b[23][1]++,request.status<300)){cov_2fpm5ujm8s().b[22][0]++;// Parse the JSON response to get the book object
const book=(cov_2fpm5ujm8s().s[104]++,JSON.parse(request.responseText));cov_2fpm5ujm8s().s[105]++;displayBookDetails(book);// Call displayBookDetails to render the book details
}// If the status is 400, alert about invalid book ID format
else{cov_2fpm5ujm8s().b[22][1]++;cov_2fpm5ujm8s().s[106]++;if(request.status===400){cov_2fpm5ujm8s().b[24][0]++;cov_2fpm5ujm8s().s[107]++;alert('Invalid book ID format. Please check the ID and try again.');cov_2fpm5ujm8s().s[108]++;console.error('Invalid book ID format:',request.statusText);}// If the status is 404, alert that the book was not found
else{cov_2fpm5ujm8s().b[24][1]++;cov_2fpm5ujm8s().s[109]++;if(request.status===404){cov_2fpm5ujm8s().b[25][0]++;cov_2fpm5ujm8s().s[110]++;alert('Book not found. It may have been removed.');cov_2fpm5ujm8s().s[111]++;console.error('Book not found:',request.statusText);}// Handle other unsuccessful status codes by alerting the user
else{cov_2fpm5ujm8s().b[25][1]++;cov_2fpm5ujm8s().s[112]++;alert('Failed to retrieve book details. Please try again later.');cov_2fpm5ujm8s().s[113]++;console.error('Failed to fetch book:',request.statusText);}}}};// Define the onerror event handler for network errors
cov_2fpm5ujm8s().s[114]++;request.onerror=function(){cov_2fpm5ujm8s().f[10]++;cov_2fpm5ujm8s().s[115]++;// Log a network error and alert the user
console.error('Network error while fetching book');cov_2fpm5ujm8s().s[116]++;alert('An error occurred while fetching the book. Please check the console for details.');};// Send the request to the server
cov_2fpm5ujm8s().s[117]++;request.send();}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMmZwbTV1am04cyIsImFjdHVhbENvdmVyYWdlIiwiY2xvc2VGb3JtIiwiZiIsInMiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwic3R5bGUiLCJkaXNwbGF5IiwiaXNUaXRsZVVuaXF1ZSIsIm5ld1RpdGxlIiwiYm9va0lkIiwicmVzcG9uc2UiLCJmZXRjaCIsImJvb2tzIiwianNvbiIsImV2ZXJ5IiwiYm9vayIsImIiLCJ0aXRsZSIsIl9pZCIsImlzVmFsaWRJU0JOIiwiaXNibiIsInJlcGxhY2UiLCJsZW5ndGgiLCJzdW0iLCJpIiwicGFyc2VJbnQiLCJjaGVja3N1bSIsImRpZ2l0IiwiaXNOYU4iLCJlZGl0Qm9vayIsIm9rIiwidmFsdWUiLCJhdXRob3IiLCJnZW5yZSIsImF2YWlsYWJsZUNvcGllcyIsImltYWdlRWxlbWVudCIsImltYWdlIiwic3JjIiwiYWxlcnQiLCJlcnJvciIsImNvbnNvbGUiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJmaWxlIiwidGFyZ2V0IiwiZmlsZXMiLCJzaXplIiwicmVhZGVyIiwiRmlsZVJlYWRlciIsIm9ubG9hZCIsImUiLCJyZXN1bHQiLCJyZWFkQXNEYXRhVVJMIiwicHJldmVudERlZmF1bHQiLCJmb3JtIiwiRm9ybURhdGEiLCJ0cmltIiwiaXNVbmlxdWVUaXRsZSIsImlzQ29uZmlybWVkIiwiY29uZmlybSIsIm1ldGhvZCIsImJvZHkiLCJnZXRCb29rcyIsImdldEJvb2tCeUlkIiwicmVxdWVzdCIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsInN0YXR1cyIsIkpTT04iLCJwYXJzZSIsInJlc3BvbnNlVGV4dCIsImRpc3BsYXlCb29rRGV0YWlscyIsInN0YXR1c1RleHQiLCJvbmVycm9yIiwic2VuZCJdLCJzb3VyY2VzIjpbInVwZGF0ZS1ib29rLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEdlbmVyYWwgZnVuY3Rpb24gdG8gY2xvc2Ugd2hpY2hldmVyIGZvcm0gaXMgb3BlblxyXG5mdW5jdGlvbiBjbG9zZUZvcm0oKSB7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRpdC1vdmVybGF5Jykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0Rm9ybUNvbnRhaW5lcicpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbn1cclxuXHJcbi8vIEZ1bmN0aW9uIHRvIGNoZWNrIGlmIGEgdGl0bGUgYWxyZWFkeSBleGlzdHMsIGlnbm9yaW5nIHRoZSBjdXJyZW50IGJvb2tcclxuYXN5bmMgZnVuY3Rpb24gaXNUaXRsZVVuaXF1ZShuZXdUaXRsZSwgYm9va0lkKSB7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGBodHRwOi8vbG9jYWxob3N0OjU1MDAvYm9va3NgKTtcclxuICAgIGNvbnN0IGJvb2tzID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG5cclxuICAgIHJldHVybiBib29rcy5ldmVyeShib29rID0+IGJvb2sudGl0bGUgIT09IG5ld1RpdGxlIHx8IGJvb2suX2lkID09PSBib29rSWQpO1xyXG59XHJcblxyXG4vLyBGdW5jdGlvbiB0byB2YWxpZGF0ZSBJU0JOXHJcbmZ1bmN0aW9uIGlzVmFsaWRJU0JOKGlzYm4pIHtcclxuICAgIC8vIFJlbW92ZSBhbnkgaHlwaGVuc1xyXG4gICAgaXNibiA9IGlzYm4ucmVwbGFjZSgvLS9nLCAnJyk7XHJcblxyXG4gICAgLy8gQ2hlY2sgaWYgdGhlIElTQk4gaXMgMTAgb3IgMTMgY2hhcmFjdGVycyBsb25nXHJcbiAgICBpZiAoaXNibi5sZW5ndGggPT09IDEwKSB7XHJcbiAgICAgICAgbGV0IHN1bSA9IDA7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA5OyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGlzYm5baV0gPCAnMCcgfHwgaXNibltpXSA+ICc5JykgcmV0dXJuIGZhbHNlOyAvLyBFbnN1cmUgYWxsIGNoYXJhY3RlcnMgYXJlIGRpZ2l0c1xyXG4gICAgICAgICAgICBzdW0gKz0gKGkgKyAxKSAqIHBhcnNlSW50KGlzYm5baV0sIDEwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBjaGVja3N1bSA9IGlzYm5bOV07XHJcbiAgICAgICAgaWYgKGNoZWNrc3VtID09PSAnWCcpIHtcclxuICAgICAgICAgICAgc3VtICs9IDEwICogMTA7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjaGVja3N1bSA+PSAnMCcgJiYgY2hlY2tzdW0gPD0gJzknKSB7XHJcbiAgICAgICAgICAgIHN1bSArPSAxMCAqIHBhcnNlSW50KGNoZWNrc3VtLCAxMCk7IC8vY2FsY3VsYXRlcyB0aGUgd2VpZ2h0ZWQgc3VtIGZvciBlYWNoIGRpZ2l0IGJ5IG11bHRpcGx5aW5nIHRoZSBkaWdpdCdzIHBvc2l0aW9uXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc3VtICUgMTEgPT09IDA7XHJcbiAgICB9IGVsc2UgaWYgKGlzYm4ubGVuZ3RoID09PSAxMykge1xyXG4gICAgICAgIGxldCBzdW0gPSAwO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTM7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBkaWdpdCA9IHBhcnNlSW50KGlzYm5baV0sIDEwKTtcclxuICAgICAgICAgICAgaWYgKGlzTmFOKGRpZ2l0KSkgcmV0dXJuIGZhbHNlOyAvLyBFbnN1cmUgYWxsIGNoYXJhY3RlcnMgYXJlIGRpZ2l0c1xyXG4gICAgICAgICAgICBzdW0gKz0gaSAlIDIgPT09IDAgPyBkaWdpdCA6IGRpZ2l0ICogMztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHN1bSAlIDEwID09PSAwO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59XHJcblxyXG4vLyBGdW5jdGlvbiB0byBvcGVuIHRoZSB1cGRhdGUgZm9ybSB3aXRoIGN1cnJlbnQgYm9vayBkZXRhaWxzXHJcbmFzeW5jIGZ1bmN0aW9uIGVkaXRCb29rKGJvb2tJZCkge1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgLy8gRmV0Y2ggdGhlIGJvb2sgZGV0YWlscyBmcm9tIHRoZSBzZXJ2ZXIgdXNpbmcgdGhlIGJvb2sgSURcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGBodHRwOi8vbG9jYWxob3N0OjU1MDAvYm9va3MvJHtib29rSWR9YCk7XHJcblxyXG4gICAgICAgIGlmIChyZXNwb25zZS5vaykge1xyXG4gICAgICAgICAgICBjb25zdCBib29rID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG5cclxuICAgICAgICAgICAgLy8gU2V0IHRoZSBmb3JtIGZpZWxkcyB3aXRoIGN1cnJlbnQgYm9vayBkZXRhaWxzXHJcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0VGl0bGUnKS52YWx1ZSA9IGJvb2sudGl0bGU7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0QXV0aG9yJykudmFsdWUgPSBib29rLmF1dGhvcjtcclxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXRJc2JuJykudmFsdWUgPSBib29rLmlzYm47XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0R2VucmUnKS52YWx1ZSA9IGJvb2suZ2VucmU7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0Q29waWVzJykudmFsdWUgPSBib29rLmF2YWlsYWJsZUNvcGllcztcclxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXRCb29rSWQnKS52YWx1ZSA9IGJvb2suX2lkO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRpdEltYWdlJykudmFsdWUgPSAnJzsgLy8gUmVzZXQgaW1hZ2UgaW5wdXRcclxuXHJcbiAgICAgICAgICAgIC8vIFNldCB0aGUgaW1hZ2UgcHJldmlldyBlbGVtZW50IGlmIHRoZXJlJ3MgYW4gZXhpc3RpbmcgaW1hZ2VcclxuICAgICAgICAgICAgY29uc3QgaW1hZ2VFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXRCb29rUHJldmlld0ltYWdlJyk7XHJcbiAgICAgICAgICAgIGlmIChib29rLmltYWdlKSB7XHJcbiAgICAgICAgICAgICAgICBpbWFnZUVsZW1lbnQuc3JjID0gYGRhdGE6aW1hZ2UvanBlZztiYXNlNjQsJHtib29rLmltYWdlfWA7XHJcbiAgICAgICAgICAgICAgICBpbWFnZUVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7IC8vIFNob3cgdGhlIGltYWdlIGlmIGl0IGV4aXN0c1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaW1hZ2VFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IC8vIEhpZGUgdGhlIGltYWdlIGlmIG5vdCBhdmFpbGFibGVcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gRGlzcGxheSB0aGUgZm9ybVxyXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRpdEZvcm1Db250YWluZXInKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXQtb3ZlcmxheScpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGFsZXJ0KCdGYWlsZWQgdG8gZmV0Y2ggYm9vayBkZXRhaWxzIGZvciBlZGl0aW5nLicpO1xyXG4gICAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgYm9vayBmb3IgZWRpdGluZzonLCBlcnJvcik7XHJcbiAgICAgICAgYWxlcnQoJ0FuIGVycm9yIG9jY3VycmVkIHdoaWxlIGZldGNoaW5nIHRoZSBib29rIGRldGFpbHMuJyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIEV2ZW50IGxpc3RlbmVyIHRvIGhhbmRsZSBpbWFnZSBwcmV2aWV3IHdoZW4gYSBuZXcgaW1hZ2UgaXMgc2VsZWN0ZWRcclxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXRJbWFnZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgY29uc3QgZmlsZSA9IGV2ZW50LnRhcmdldC5maWxlc1swXTtcclxuICAgIFxyXG4gICAgLy8gQ2hlY2sgaWYgYW4gaW1hZ2UgZmlsZSBpcyBzZWxlY3RlZFxyXG4gICAgaWYgKGZpbGUpIHtcclxuICAgICAgICAvLyBDaGVjayBpZiBmaWxlIHNpemUgZXhjZWVkcyAxNk1CICgxNiAqIDEwMjQgKiAxMDI0IGJ5dGVzKVxyXG4gICAgICAgIGlmIChmaWxlLnNpemUgPiAxNiAqIDEwMjQgKiAxMDI0KSB7XHJcbiAgICAgICAgICAgIGFsZXJ0KCdJbWFnZSBzaXplIHNob3VsZCBub3QgZXhjZWVkIDE2TUIuIFBsZWFzZSBzZWxlY3QgYSBzbWFsbGVyIGZpbGUuJyk7XHJcbiAgICAgICAgICAgIGV2ZW50LnRhcmdldC52YWx1ZSA9ICcnOyAvLyBDbGVhciB0aGUgZmlsZSBpbnB1dFxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBQcm9jZWVkIHdpdGggZGlzcGxheWluZyB0aGUgaW1hZ2UgcHJldmlldyBpZiB0aGUgc2l6ZSBpcyB2YWxpZFxyXG4gICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XHJcbiAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGltYWdlRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0Qm9va1ByZXZpZXdJbWFnZScpO1xyXG4gICAgICAgICAgICBpbWFnZUVsZW1lbnQuc3JjID0gZS50YXJnZXQucmVzdWx0O1xyXG4gICAgICAgICAgICBpbWFnZUVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7IC8vIFNob3cgdGhlIHByZXZpZXdcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpO1xyXG4gICAgfVxyXG59KTtcclxuXHJcbi8vIEZ1bmN0aW9uIHRvIGhhbmRsZSB1cGRhdGUgZm9ybSBzdWJtaXNzaW9uXHJcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0Qm9va0Zvcm0nKS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBhc3luYyBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7IC8vIFByZXZlbnQgZGVmYXVsdCBmb3JtIHN1Ym1pc3Npb25cclxuXHJcbiAgICBjb25zdCBmb3JtID0gbmV3IEZvcm1EYXRhKHRoaXMpO1xyXG4gICAgY29uc3QgYm9va0lkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXRCb29rSWQnKS52YWx1ZTtcclxuICAgIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXRUaXRsZScpLnZhbHVlLnRyaW0oKTsgXHJcbiAgICBjb25zdCBhdXRob3IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRpdEF1dGhvcicpLnZhbHVlLnRyaW0oKTtcclxuICAgIGNvbnN0IGlzYm4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRpdElzYm4nKS52YWx1ZTtcclxuXHJcbiAgICAvLyBUaXRsZSBhbmQgQXV0aG9yIGxlbmd0aCB2YWxpZGF0aW9uXHJcbiAgICBpZiAodGl0bGUubGVuZ3RoID4gMTAwKSB7XHJcbiAgICAgICAgYWxlcnQoJ1RpdGxlIG11c3QgYmUgMTAwIGNoYXJhY3RlcnMgb3IgZmV3ZXIuJyk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChhdXRob3IubGVuZ3RoID4gMTUwKSB7XHJcbiAgICAgICAgYWxlcnQoJ0F1dGhvciBuYW1lIG11c3QgYmUgMTUwIGNoYXJhY3RlcnMgb3IgZmV3ZXIuJyk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghaXNWYWxpZElTQk4oaXNibikpIHtcclxuICAgICAgICBhbGVydCgnSW52YWxpZCBJU0JOLiBQbGVhc2UgZW50ZXIgYSB2YWxpZCBJU0JOLTEwIG9yIElTQk4tMTMuJyk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENoZWNrIGlmIHRpdGxlIGlzIHVuaXF1ZSAoaWdub3JpbmcgdGhlIGN1cnJlbnQgYm9vaydzIG93biB0aXRsZSlcclxuICAgIGNvbnN0IGlzVW5pcXVlVGl0bGUgPSBhd2FpdCBpc1RpdGxlVW5pcXVlKHRpdGxlLCBib29rSWQpO1xyXG4gICAgaWYgKCFpc1VuaXF1ZVRpdGxlKSB7XHJcbiAgICAgICAgYWxlcnQoJ1RpdGxlIGFscmVhZHkgZXhpc3RzLiBQbGVhc2UgY2hvb3NlIGEgZGlmZmVyZW50IHRpdGxlLicpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBpc0NvbmZpcm1lZCA9IGNvbmZpcm0oXCJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gdXBkYXRlIHRoZSBib29rIGRldGFpbHM/XCIpO1xyXG4gICAgaWYgKCFpc0NvbmZpcm1lZCkge1xyXG4gICAgICAgIHJldHVybjsgLy8gRXhpdCBmdW5jdGlvbiBpZiB1c2VyIGRvZXMgbm90IGNvbmZpcm1cclxuICAgIH1cclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYGh0dHA6Ly9sb2NhbGhvc3Q6NTUwMC91cGRhdGVCb29rLyR7Ym9va0lkfWAsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnUFVUJyxcclxuICAgICAgICAgICAgYm9keTogZm9ybSxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgICAgIGFsZXJ0KCdCb29rIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5IScpO1xyXG4gICAgICAgICAgICBjbG9zZUZvcm0oKTsgLy8gQ2xvc2UgdGhlIGVkaXQgZm9ybVxyXG4gICAgICAgICAgICBnZXRCb29rcygpOyAvLyBSZWZyZXNoIHRoZSBib29rIGxpc3RcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBhbGVydCgnRmFpbGVkIHRvIHVwZGF0ZSBib29rLiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLicpO1xyXG4gICAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgYm9vazonLCBlcnJvcik7XHJcbiAgICAgICAgYWxlcnQoJ0FuIGVycm9yIG9jY3VycmVkIHdoaWxlIHVwZGF0aW5nIHRoZSBib29rLiBQbGVhc2UgY2hlY2sgdGhlIGNvbnNvbGUgZm9yIGRldGFpbHMuJyk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuLy8gRnVuY3Rpb24gdG8gZmV0Y2ggYSBib29rIGJ5IElEXHJcbmZ1bmN0aW9uIGdldEJvb2tCeUlkKGJvb2tJZCkge1xyXG4gICAgLy8gVmFsaWRhdGUgdGhlIHByb3ZpZGVkIGJvb2sgSURcclxuICAgIGlmICghYm9va0lkIHx8IHR5cGVvZiBib29rSWQgIT09ICdzdHJpbmcnIHx8IGJvb2tJZC50cmltKCkgPT09ICcnKSB7XHJcbiAgICAgICAgYWxlcnQoJ0ludmFsaWQgYm9vayBJRC4gUGxlYXNlIHByb3ZpZGUgYSB2YWxpZCBJRC4nKTtcclxuICAgICAgICByZXR1cm47IC8vIEV4aXQgZnVuY3Rpb24gaWYgdGhlIGJvb2sgSUQgaXMgaW52YWxpZFxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgIC8vIE9wZW4gYSBHRVQgcmVxdWVzdCB0byBmZXRjaCBhIHNwZWNpZmljIGJvb2sgYnkgaXRzIElELCB1c2luZyB0ZW1wbGF0ZSBsaXRlcmFscyBpbiB0aGUgVVJMXHJcbiAgICByZXF1ZXN0Lm9wZW4oJ0dFVCcsIGBodHRwOi8vbG9jYWxob3N0OjU1MDAvYm9va3MvJHtib29rSWR9YCwgdHJ1ZSk7XHJcblxyXG4gICAgLy8gRGVmaW5lIHRoZSBvbmxvYWQgZXZlbnQgaGFuZGxlciBmb3IgdGhlIHJlcXVlc3RcclxuICAgIHJlcXVlc3Qub25sb2FkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSByZXF1ZXN0IHdhcyBzdWNjZXNzZnVsIChzdGF0dXMgY29kZSBiZXR3ZWVuIDIwMCBhbmQgMjk5KVxyXG4gICAgICAgIGlmIChyZXF1ZXN0LnN0YXR1cyA+PSAyMDAgJiYgcmVxdWVzdC5zdGF0dXMgPCAzMDApIHtcclxuICAgICAgICAgICAgLy8gUGFyc2UgdGhlIEpTT04gcmVzcG9uc2UgdG8gZ2V0IHRoZSBib29rIG9iamVjdFxyXG4gICAgICAgICAgICBjb25zdCBib29rID0gSlNPTi5wYXJzZShyZXF1ZXN0LnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgICAgIGRpc3BsYXlCb29rRGV0YWlscyhib29rKTsgLy8gQ2FsbCBkaXNwbGF5Qm9va0RldGFpbHMgdG8gcmVuZGVyIHRoZSBib29rIGRldGFpbHNcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSWYgdGhlIHN0YXR1cyBpcyA0MDAsIGFsZXJ0IGFib3V0IGludmFsaWQgYm9vayBJRCBmb3JtYXRcclxuICAgICAgICBlbHNlIGlmIChyZXF1ZXN0LnN0YXR1cyA9PT0gNDAwKSB7XHJcbiAgICAgICAgICAgIGFsZXJ0KCdJbnZhbGlkIGJvb2sgSUQgZm9ybWF0LiBQbGVhc2UgY2hlY2sgdGhlIElEIGFuZCB0cnkgYWdhaW4uJyk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ludmFsaWQgYm9vayBJRCBmb3JtYXQ6JywgcmVxdWVzdC5zdGF0dXNUZXh0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSWYgdGhlIHN0YXR1cyBpcyA0MDQsIGFsZXJ0IHRoYXQgdGhlIGJvb2sgd2FzIG5vdCBmb3VuZFxyXG4gICAgICAgIGVsc2UgaWYgKHJlcXVlc3Quc3RhdHVzID09PSA0MDQpIHtcclxuICAgICAgICAgICAgYWxlcnQoJ0Jvb2sgbm90IGZvdW5kLiBJdCBtYXkgaGF2ZSBiZWVuIHJlbW92ZWQuJyk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Jvb2sgbm90IGZvdW5kOicsIHJlcXVlc3Quc3RhdHVzVGV4dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEhhbmRsZSBvdGhlciB1bnN1Y2Nlc3NmdWwgc3RhdHVzIGNvZGVzIGJ5IGFsZXJ0aW5nIHRoZSB1c2VyXHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGFsZXJ0KCdGYWlsZWQgdG8gcmV0cmlldmUgYm9vayBkZXRhaWxzLiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLicpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZmV0Y2ggYm9vazonLCByZXF1ZXN0LnN0YXR1c1RleHQpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gRGVmaW5lIHRoZSBvbmVycm9yIGV2ZW50IGhhbmRsZXIgZm9yIG5ldHdvcmsgZXJyb3JzXHJcbiAgICByZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gTG9nIGEgbmV0d29yayBlcnJvciBhbmQgYWxlcnQgdGhlIHVzZXJcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdOZXR3b3JrIGVycm9yIHdoaWxlIGZldGNoaW5nIGJvb2snKTtcclxuICAgICAgICBhbGVydCgnQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgZmV0Y2hpbmcgdGhlIGJvb2suIFBsZWFzZSBjaGVjayB0aGUgY29uc29sZSBmb3IgZGV0YWlscy4nKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gU2VuZCB0aGUgcmVxdWVzdCB0byB0aGUgc2VydmVyXHJcbiAgICByZXF1ZXN0LnNlbmQoKTtcclxufSJdLCJtYXBwaW5ncyI6IjQ5ZUFlWTtBQUFBQSxjQUFBLFNBQUFBLENBQUEsU0FBQUMsY0FBQSxXQUFBQSxjQUFBLEVBQUFELGNBQUEsR0FmWjtBQUNBLFFBQVMsQ0FBQUUsU0FBU0EsQ0FBQSxDQUFHLENBQUFGLGNBQUEsR0FBQUcsQ0FBQSxNQUFBSCxjQUFBLEdBQUFJLENBQUEsTUFDakJDLFFBQVEsQ0FBQ0MsY0FBYyxDQUFDLGNBQWMsQ0FBQyxDQUFDQyxLQUFLLENBQUNDLE9BQU8sQ0FBRyxNQUFNLENBQUNSLGNBQUEsR0FBQUksQ0FBQSxNQUMvREMsUUFBUSxDQUFDQyxjQUFjLENBQUMsbUJBQW1CLENBQUMsQ0FBQ0MsS0FBSyxDQUFDQyxPQUFPLENBQUcsTUFBTSxDQUN2RSxDQUVBO0FBQ0EsY0FBZSxDQUFBQyxhQUFhQSxDQUFDQyxRQUFRLENBQUVDLE1BQU0sQ0FBRSxDQUFBWCxjQUFBLEdBQUFHLENBQUEsTUFDM0MsS0FBTSxDQUFBUyxRQUFRLEVBQUFaLGNBQUEsR0FBQUksQ0FBQSxNQUFHLEtBQU0sQ0FBQVMsS0FBSyxDQUFDLDZCQUE2QixDQUFDLEVBQzNELEtBQU0sQ0FBQUMsS0FBSyxFQUFBZCxjQUFBLEdBQUFJLENBQUEsTUFBRyxLQUFNLENBQUFRLFFBQVEsQ0FBQ0csSUFBSSxDQUFDLENBQUMsRUFBQ2YsY0FBQSxHQUFBSSxDQUFBLE1BRXBDLE1BQU8sQ0FBQVUsS0FBSyxDQUFDRSxLQUFLLENBQUNDLElBQUksRUFBSSxDQUFBakIsY0FBQSxHQUFBRyxDQUFBLE1BQUFILGNBQUEsR0FBQUksQ0FBQSxhQUFBSixjQUFBLEdBQUFrQixDQUFBLFNBQUFELElBQUksQ0FBQ0UsS0FBSyxHQUFLVCxRQUFRLElBQUFWLGNBQUEsR0FBQWtCLENBQUEsU0FBSUQsSUFBSSxDQUFDRyxHQUFHLEdBQUtULE1BQU0sRUFBRCxD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